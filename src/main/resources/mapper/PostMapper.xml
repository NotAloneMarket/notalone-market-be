<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ddwu.notalonemarket.mapper.PostMapper">
    <insert id="insertPost" parameterType="com.ddwu.notalonemarket.domain.Post" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO Post (
            title, description, total_amount, total_quantity, my_quantity,
            price_per_item, participant_limit, product_url, image_url,
            status, category_id, writer_id
        ) VALUES (
            #{title}, #{description}, #{totalAmount}, #{totalQuantity}, #{myQuantity},
            #{pricePerItem}, #{participantLimit}, #{productUrl}, #{imageUrl},
            #{status}, #{categoryId}, #{writerId}
        )
    </insert>

    <resultMap id="postResultMap" type="com.ddwu.notalonemarket.domain.Post">
	    <id property="id" column="id"/>
	    <result property="title" column="title"/>
	    <result property="description" column="description"/>
	    <result property="totalAmount" column="total_amount"/>
	    <result property="totalQuantity" column="total_quantity"/>
	    <result property="myQuantity" column="my_quantity"/>
	    <result property="pricePerItem" column="price_per_item"/>
	    <result property="participantLimit" column="participant_limit"/>
	    <result property="productUrl" column="product_url"/>
	    <result property="imageUrl" column="image_url"/>
	    <result property="status" column="status"/>
	    <result property="categoryId" column="category_id"/>
	    <result property="writerId" column="writer_id"/>
	</resultMap>
	
	<select id="selectAllSellingPosts" resultMap="postResultMap">
	    SELECT * FROM Post WHERE status = 'SELLING'
	</select>
	
	<select id="selectPostById" resultMap="postResultMap">
	    SELECT * FROM Post WHERE id = #{id}
	</select>


</mapper>
